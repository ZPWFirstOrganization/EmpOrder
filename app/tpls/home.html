<script>

//显示加载菊花
jQuery.fn.showLoading = function(top) {
    if(!top){top=0}
    if(this.css("position")!="relative"){
      this.css("position","relative");
    };

    w=$(window).width();
    h=$(window).height();

    if(!$(".loading-Bg")[0]){
        var bg='';

    }else{
      var bg="";
    }


      if(this.find(".loading").length==0){
      this.prepend('<div class="loading"></div>'+bg);
    };

    $(window).resize(function(e) {
      w=$(window).width();
        h=$(window).height();
            $(".loading-Bg").css({"width":w+"px","height":h+"px"});
        });
    //屏幕太长时调整位置

      topPx=this.height()/2;
      this.find(".loading").css("top",topPx+top);

    this.find(".loading").fadeIn(200);

};
//隐藏加载菊花
jQuery.fn.hideLoading = function() {

    this.find(".loading").fadeOut(200);
    this.find(".loading-bg").remove();
       setTimeout(function () {
       $(this).remove(".loading");
    }, 200);
};



//判断ajax返回类型 兼容ie7
function ajaxType(val){
  if(typeof(val)=='string'){
    return JSON.parse(val);
  }else{
    return val;
  }
}


$(document).ready(function(e) {
  //pc and mobile js--------------------------------------------------
   
  //自动完成搜索api   https://github.com/ArtemFitiskin/jquery-autocompleter
  var data = [
    { "value": "1", "label": "1" },
    { "value": "1-1", "label": "1-1" },
    { "value": "2", "label": "2" },
    { "value": "3", "label": "3" }
  ];

  $('.search').autocompleter({ 
    highlightMatches: true,
    // abort source if empty field
    empty: false,
    // max results
    limit: 5,
    source: data
   });



   //ajax全局阻止重复提交
   window.ys={};
   window.ys.ajax={};
   window.ys.ajax.urlMap= new Array();

  $.ajaxSetup({
    beforeSend:function(xhr){
      //console.log(this.url);
      if(ys.ajax.urlMap[this.url] && ys.ajax.urlMap[this.url] == 'lock'){
        return false;
      } else {
        ys.ajax.urlMap[this.url] = 'lock';
      }
    },
    complete:function(){
      ys.ajax.urlMap[this.url] = 'unlock';
      delete ys.ajax.urlMap[this.url];
    },
    error: function(xhr, status, err){
      if(xhr.status  == "200" || xhr.status == 200){
        return;
      }
      if(xhr.status  == "510" || xhr.status == 510){
        showModal({
          msg:"请先登录再操作",
          callbackTime:1000,
          end:function(){
            avalon.vmodels.header.showLogin();
          }
        })
      } else if(xhr.status  == "511" || xhr.status == 511){
        showModal({
          msg:"用户还未通过验证"
        })
      } else if(xhr.status  == "512" || xhr.status == 512){
        showModal({
          msg:"用户已经被冻结"
        })
      } else if(xhr.status  == "513" || xhr.status == 513){
        showAlert({
          msg:"您已被列入黑名单!<br/>请联系左木[微信635636]"
        })
      }
      hideLoading();
    }
  });
  
  //pc and mobile js--------------------------------------------------
  
/*  showConfirm({
    msg:"confirm效果？",
    confirmed:function(){
      alert("确定回调");

    },
    cancel:function(){


    }
  });
  
  showAlert({msg:"alert效果"});*/
  
  //秀/藏菊花
  $("body").showLoading(-150);
  $("body").hideLoading();

});

</script>


<div>

  <!--pc头-->
  <div ui-view="pcHeader"></div>

  <!--mobile头-->
  <div ui-view="mobileHeader"></div>

  <!--主体-->
  <!--mobile分类选择-->
  <div ui-view="mobileNav"></div>

  <!--pc mobile产品列表-->
  <div ui-view="productList"></div>

  <!--底部-->
  <div class="footer-wrapper pc-only">
  ©2007-2013 Mary Kay Inc. 沪ICP备10024290号
  </div>

</div>
  
    
